<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>S√≥ Ouvi Falar - Conte√∫do que Transforma</title>
  <!-- Fonte personalizada -->
  <link href="https://fonts.googleapis.com/css?family=Poppins:400,600&display=swap" rel="stylesheet">
  <style>
    /* Reset b√°sico */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background: url('https://firebasestorage.googleapis.com/v0/b/fina-kenway.firebasestorage.app/o/DALL%C2%B7E%202025-02-11%2022.33.15%20-%20A%20high-quality%20digital%20wallpaper%20representing%20vast%20and%20diverse%20knowledge%2C%20perfect%20for%20a%20modern%20blog.%20The%20image%20should%20feature%20a%20cosmic%20background%20with.webp?alt=media&token=fd6a1807-a10d-4ccf-a8c1-fad26058e06a') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
      line-height: 1.6;
    }
    header {
      background: rgba(0, 0, 0, 0.75);
      padding: 60px 20px;
      text-align: center;
      font-size: 2.5em;
      font-weight: 600;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    }
    nav {
      background: #222;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      padding: 15px;
    }
    nav a {
      color: #fff;
      text-decoration: none;
      padding: 10px 20px;
      margin: 5px;
      border-radius: 5px;
      transition: background 0.3s;
    }
    nav a:hover {
      background: #ff0000;
    }
    .container {
      max-width: 1200px;
      margin: 40px auto;
      padding: 20px;
      background: rgba(30, 30, 30, 0.95);
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    }
    .container h2 {
      margin-bottom: 20px;
      font-size: 2em;
      text-align: center;
      color: #ff0000;
    }
    .post {
      background: #252525;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
      transition: all 0.3s ease;
    }
    .post:hover {
      transform: scale(1.02);
    }
    .post h2 {
      font-size: 1.5em;
      margin-bottom: 10px;
      cursor: pointer;
      color: #ff0000;
    }
    .post-content {
      display: none;
      margin-top: 10px;
    }
    .post-content img {
      width: 100%;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    .post-content p {
      font-size: 1.1em;
      text-align: justify;
    }
    .actions {
      display: flex;
      justify-content: space-around;
      margin-top: 10px;
    }
    .actions button {
      background: #ff0000;
      color: #fff;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .actions button:hover {
      background: #e60000;
    }
    footer {
      background: linear-gradient(90deg, #ff0000, #8a2be2, #00ffff);
      text-align: center;
      padding: 15px;
      font-size: 1em;
      margin-top: 40px;
    }
    footer a {
      color: #fff;
      text-decoration: none;
      margin: 0 5px;
    }
  </style>
  <script>
    // Redireciona para HTTPS se necess√°rio
    if (location.protocol !== 'https:') {
      location.href = 'https:' + window.location.href.substring(window.location.protocol.length);
    }
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4859599011548606" crossorigin="anonymous"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body>
  <header>
    S√≥ Ouvi Falar - Conte√∫do que Transforma
  </header>
  <nav>
    <a href="#" onclick="renderPosts('Finan√ßas')">Finan√ßas</a>
    <a href="#" onclick="renderPosts('Jogos')">Jogos</a>
    <a href="#" onclick="renderPosts('Not√≠cias')">Not√≠cias</a>
    <a href="#" onclick="renderPosts('Contos')">Contos</a>
    <a href="#" onclick="renderPosts('Discuss√µes')">Discuss√µes</a>
    <a href="#" onclick="renderPosts('Sa√∫de')">Sa√∫de & Cuidados Pessoais</a>
    <a href="#" onclick="renderPosts('Cursos')">Cursos</a>
  </nav>
  <div class="container">
    <h2>√öltimas Postagens</h2>
    <div id="posts">
      <!-- As postagens ser√£o carregadas aqui -->
    </div>
  </div>
  <footer>
    <p>¬© 2025 S√≥ Ouvi Falar - Conte√∫do que Transforma.</p>
    <p>
      <a href="politica-de-privacidade.html">Pol√≠tica de Privacidade</a> | 
      <a href="termos-de-uso.html">Termos de Uso</a>
    </p>
  </footer>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Substitua os dados abaixo com as configura√ß√µes do seu projeto Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyBsMk5SshHKwY7y7zi4cgc8uI-Jz2q_e8M",
        authDomain: "fina-kenway.firebaseapp.com",
        projectId: "fina-kenway",
        storageBucket: "fina-kenway.appspot.com",
        messagingSenderId: "55975801143",
        appId: "1:559758011438:web:86329ee53ab213ab87c3bf"
      };
      firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore();
      
      // Fun√ß√£o para alternar a visualiza√ß√£o do conte√∫do do post (minimizado/expandido)
      window.togglePostContent = function(element) {
        const contentDiv = element.nextElementSibling;
        if (contentDiv.style.display === "none" || contentDiv.style.display === "") {
          contentDiv.style.display = "block";
        } else {
          contentDiv.style.display = "none";
        }
      };

      // Fun√ß√£o para atualizar os likes de um post (com restri√ß√£o via localStorage)
      window.likePost = function(postId) {
        if (localStorage.getItem("liked_" + postId)) {
          alert("Voc√™ j√° curtiu esse post!");
          return;
        }
        const postRef = db.collection("posts").doc(postId);
        postRef.update({ likes: firebase.firestore.FieldValue.increment(1) })
          .then(() => {
            localStorage.setItem("liked_" + postId, "true");
            // Atualiza a contagem exibida
            document.querySelector(`#post-${postId} .like-count`).innerText =
              parseInt(document.querySelector(`#post-${postId} .like-count`).innerText) + 1;
          })
          .catch((error) => console.error("Erro ao dar like: ", error));
      };

      // Fun√ß√£o para atualizar os dislikes de um post (com restri√ß√£o via localStorage)
      window.dislikePost = function(postId) {
        if (localStorage.getItem("disliked_" + postId)) {
          alert("Voc√™ j√° descurtiu esse post!");
          return;
        }
        const postRef = db.collection("posts").doc(postId);
        postRef.update({ dislikes: firebase.firestore.FieldValue.increment(1) })
          .then(() => {
            localStorage.setItem("disliked_" + postId, "true");
            document.querySelector(`#post-${postId} .dislike-count`).innerText =
              parseInt(document.querySelector(`#post-${postId} .dislike-count`).innerText) + 1;
          })
          .catch((error) => console.error("Erro ao dar dislike: ", error));
      };

      // Fun√ß√£o para renderizar as postagens de acordo com a categoria selecionada
      window.renderPosts = function(category) {
        const postContainer = document.getElementById("posts");
        postContainer.innerHTML = "<p>Carregando postagens...</p>";
        db.collection("posts").where("category", "==", category).orderBy("date", "desc").get()
          .then((querySnapshot) => {
            postContainer.innerHTML = "";
            if(querySnapshot.empty) {
              postContainer.innerHTML = "<p>Nenhuma postagem encontrada nesta categoria.</p>";
            } else {
              querySnapshot.forEach((doc) => {
                const post = doc.data();
                const postId = doc.id;
                const postElement = document.createElement("div");
                postElement.classList.add("post");
                postElement.id = "post-" + postId;
                postElement.innerHTML = `
                  <h2 onclick="togglePostContent(this)">${post.title}</h2>
                  <div class="post-content">
                    ${ post.image ? `<img src="${post.image}" alt="Imagem do post">` : '' }
                    <p>${post.content}</p>
                    <div class="actions">
                      <button onclick="likePost('${postId}')">üëç <span class="like-count">${post.likes || 0}</span></button>
                      <button onclick="dislikePost('${postId}')">üëé <span class="dislike-count">${post.dislikes || 0}</span></button>
                    </div>
                  </div>
                `;
                postContainer.appendChild(postElement);
              });
            }
          })
          .catch((error) => {
            postContainer.innerHTML = "<p>Erro ao carregar postagens.</p>";
            console.error("Erro: ", error);
          });
      };

      // Carrega inicialmente a categoria "Not√≠cias"
      renderPosts("Not√≠cias");
    });
  </script>
</body>
</html>
